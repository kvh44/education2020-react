{"ast":null,"code":"//\n// Modified by @casesandberg to work via Node exports\n//\n// Copyright (c) 2013 HubSpot, Inc.\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\nvar AjaxMonitor,\n    Bar,\n    DocumentMonitor,\n    ElementMonitor,\n    ElementTracker,\n    EventLagMonitor,\n    Evented,\n    Events,\n    NoTargetError,\n    Pace,\n    RequestIntercept,\n    SOURCE_KEYS,\n    Scaler,\n    SocketRequestTracker,\n    XHRRequestTracker,\n    animation,\n    avgAmplitude,\n    bar,\n    cancelAnimation,\n    cancelAnimationFrame,\n    defaultOptions,\n    extend,\n    extendNative,\n    getFromDOM,\n    getIntercept,\n    handlePushState,\n    ignoreStack,\n    init,\n    now,\n    options,\n    requestAnimationFrame,\n    result,\n    runAnimation,\n    scalers,\n    shouldIgnoreURL,\n    shouldTrack,\n    source,\n    sources,\n    uniScaler,\n    _WebSocket,\n    _XDomainRequest,\n    _XMLHttpRequest,\n    _i,\n    _intercept,\n    _len,\n    _pushState,\n    _ref,\n    _ref1,\n    _replaceState,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function (child, parent) {\n  for (var key in parent) {\n    if (__hasProp.call(parent, key)) child[key] = parent[key];\n  }\n\n  function ctor() {\n    this.constructor = child;\n  }\n\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n  child.__super__ = parent.prototype;\n  return child;\n},\n    __indexOf = [].indexOf || function (item) {\n  for (var i = 0, l = this.length; i < l; i++) {\n    if (i in this && this[i] === item) return i;\n  }\n\n  return -1;\n};\n\ndefaultOptions = {\n  catchupTime: 100,\n  initialRate: .03,\n  minTime: 250,\n  ghostTime: 100,\n  maxProgressPerFrame: 20,\n  easeFactor: 1.25,\n  startOnPageLoad: true,\n  restartOnPushState: true,\n  restartOnRequestAfter: 500,\n  target: 'body',\n  elements: {\n    checkInterval: 100,\n    selectors: ['body']\n  },\n  eventLag: {\n    minSamples: 10,\n    sampleCount: 3,\n    lagThreshold: 3\n  },\n  ajax: {\n    trackMethods: ['GET'],\n    trackWebSockets: true,\n    ignoreURLs: []\n  }\n};\n\nnow = function () {\n  var _ref;\n\n  return (_ref = typeof performance !== \"undefined\" && performance !== null ? typeof performance.now === \"function\" ? performance.now() : void 0 : void 0) != null ? _ref : +new Date();\n};\n\nrequestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\ncancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\nif (requestAnimationFrame == null) {\n  requestAnimationFrame = function (fn) {\n    return setTimeout(fn, 50);\n  };\n\n  cancelAnimationFrame = function (id) {\n    return clearTimeout(id);\n  };\n}\n\nrunAnimation = function (fn) {\n  var last, tick;\n  last = now();\n\n  tick = function () {\n    var diff;\n    diff = now() - last;\n\n    if (diff >= 33) {\n      last = now();\n      return fn(diff, function () {\n        return requestAnimationFrame(tick);\n      });\n    } else {\n      return setTimeout(tick, 33 - diff);\n    }\n  };\n\n  return tick();\n};\n\nresult = function () {\n  var args, key, obj;\n  obj = arguments[0], key = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n\n  if (typeof obj[key] === 'function') {\n    return obj[key].apply(obj, args);\n  } else {\n    return obj[key];\n  }\n};\n\nextend = function () {\n  var key, out, source, sources, val, _i, _len;\n\n  out = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\n  for (_i = 0, _len = sources.length; _i < _len; _i++) {\n    source = sources[_i];\n\n    if (source) {\n      for (key in source) {\n        if (!__hasProp.call(source, key)) continue;\n        val = source[key];\n\n        if (out[key] != null && typeof out[key] === 'object' && val != null && typeof val === 'object') {\n          extend(out[key], val);\n        } else {\n          out[key] = val;\n        }\n      }\n    }\n  }\n\n  return out;\n};\n\navgAmplitude = function (arr) {\n  var count, sum, v, _i, _len;\n\n  sum = count = 0;\n\n  for (_i = 0, _len = arr.length; _i < _len; _i++) {\n    v = arr[_i];\n    sum += Math.abs(v);\n    count++;\n  }\n\n  return sum / count;\n};\n\ngetFromDOM = function (key, json) {\n  var data, e, el;\n\n  if (key == null) {\n    key = 'options';\n  }\n\n  if (json == null) {\n    json = true;\n  }\n\n  el = document.querySelector(\"[data-pace-\" + key + \"]\");\n\n  if (!el) {\n    return;\n  }\n\n  data = el.getAttribute(\"data-pace-\" + key);\n\n  if (!json) {\n    return data;\n  }\n\n  try {\n    return JSON.parse(data);\n  } catch (_error) {\n    e = _error;\n    return typeof console !== \"undefined\" && console !== null ? console.error(\"Error parsing inline pace options\", e) : void 0;\n  }\n};\n\nEvented = function () {\n  function Evented() {}\n\n  Evented.prototype.on = function (event, handler, ctx, once) {\n    var _base;\n\n    if (once == null) {\n      once = false;\n    }\n\n    if (this.bindings == null) {\n      this.bindings = {};\n    }\n\n    if ((_base = this.bindings)[event] == null) {\n      _base[event] = [];\n    }\n\n    return this.bindings[event].push({\n      handler: handler,\n      ctx: ctx,\n      once: once\n    });\n  };\n\n  Evented.prototype.once = function (event, handler, ctx) {\n    return this.on(event, handler, ctx, true);\n  };\n\n  Evented.prototype.off = function (event, handler) {\n    var i, _ref, _results;\n\n    if (((_ref = this.bindings) != null ? _ref[event] : void 0) == null) {\n      return;\n    }\n\n    if (handler == null) {\n      return delete this.bindings[event];\n    } else {\n      i = 0;\n      _results = [];\n\n      while (i < this.bindings[event].length) {\n        if (this.bindings[event][i].handler === handler) {\n          _results.push(this.bindings[event].splice(i, 1));\n        } else {\n          _results.push(i++);\n        }\n      }\n\n      return _results;\n    }\n  };\n\n  Evented.prototype.trigger = function () {\n    var args, ctx, event, handler, i, once, _ref, _ref1, _results;\n\n    event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\n    if ((_ref = this.bindings) != null ? _ref[event] : void 0) {\n      i = 0;\n      _results = [];\n\n      while (i < this.bindings[event].length) {\n        _ref1 = this.bindings[event][i], handler = _ref1.handler, ctx = _ref1.ctx, once = _ref1.once;\n        handler.apply(ctx != null ? ctx : this, args);\n\n        if (once) {\n          _results.push(this.bindings[event].splice(i, 1));\n        } else {\n          _results.push(i++);\n        }\n      }\n\n      return _results;\n    }\n  };\n\n  return Evented;\n}();\n\nPace = {}; // window.Pace || {};\n// window.Pace = Pace;\n\nextend(Pace, Evented.prototype);\noptions = Pace.options = extend({}, defaultOptions, window.paceOptions, getFromDOM());\n_ref = ['ajax', 'document', 'eventLag', 'elements'];\n\nfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n  source = _ref[_i];\n\n  if (options[source] === true) {\n    options[source] = defaultOptions[source];\n  }\n}\n\nNoTargetError = function (_super) {\n  __extends(NoTargetError, _super);\n\n  function NoTargetError() {\n    _ref1 = NoTargetError.__super__.constructor.apply(this, arguments);\n    return _ref1;\n  }\n\n  return NoTargetError;\n}(Error);\n\nBar = function () {\n  function Bar() {\n    this.progress = 0;\n  }\n\n  Bar.prototype.getElement = function () {\n    var targetElement;\n\n    if (this.el == null) {\n      targetElement = document.querySelector(options.target);\n\n      if (!targetElement) {\n        throw new NoTargetError();\n      }\n\n      this.el = document.createElement('div');\n      this.el.className = \"pace pace-active\";\n      document.body.className = document.body.className.replace(/pace-done/g, '');\n      document.body.className += ' pace-running';\n      this.el.innerHTML = '<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>';\n\n      if (targetElement.firstChild != null) {\n        targetElement.insertBefore(this.el, targetElement.firstChild);\n      } else {\n        targetElement.appendChild(this.el);\n      }\n    }\n\n    return this.el;\n  };\n\n  Bar.prototype.finish = function () {\n    var el;\n    el = this.getElement();\n    el.className = el.className.replace('pace-active', '');\n    el.className += ' pace-inactive';\n    document.body.className = document.body.className.replace('pace-running', '');\n    return document.body.className += ' pace-done';\n  };\n\n  Bar.prototype.update = function (prog) {\n    this.progress = prog;\n    return this.render();\n  };\n\n  Bar.prototype.destroy = function () {\n    try {\n      this.getElement().parentNode.removeChild(this.getElement());\n    } catch (_error) {\n      NoTargetError = _error;\n    }\n\n    return this.el = void 0;\n  };\n\n  Bar.prototype.render = function () {\n    var el, key, progressStr, transform, _j, _len1, _ref2;\n\n    if (document.querySelector(options.target) == null) {\n      return false;\n    }\n\n    el = this.getElement();\n    transform = \"translate3d(\" + this.progress + \"%, 0, 0)\";\n    _ref2 = ['webkitTransform', 'msTransform', 'transform'];\n\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      key = _ref2[_j];\n      el.children[0].style[key] = transform;\n    }\n\n    if (!this.lastRenderedProgress || this.lastRenderedProgress | 0 !== this.progress | 0) {\n      el.children[0].setAttribute('data-progress-text', \"\" + (this.progress | 0) + \"%\");\n\n      if (this.progress >= 100) {\n        progressStr = '99';\n      } else {\n        progressStr = this.progress < 10 ? \"0\" : \"\";\n        progressStr += this.progress | 0;\n      }\n\n      el.children[0].setAttribute('data-progress', \"\" + progressStr);\n    }\n\n    return this.lastRenderedProgress = this.progress;\n  };\n\n  Bar.prototype.done = function () {\n    return this.progress >= 100;\n  };\n\n  return Bar;\n}();\n\nEvents = function () {\n  function Events() {\n    this.bindings = {};\n  }\n\n  Events.prototype.trigger = function (name, val) {\n    var binding, _j, _len1, _ref2, _results;\n\n    if (this.bindings[name] != null) {\n      _ref2 = this.bindings[name];\n      _results = [];\n\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        binding = _ref2[_j];\n\n        _results.push(binding.call(this, val));\n      }\n\n      return _results;\n    }\n  };\n\n  Events.prototype.on = function (name, fn) {\n    var _base;\n\n    if ((_base = this.bindings)[name] == null) {\n      _base[name] = [];\n    }\n\n    return this.bindings[name].push(fn);\n  };\n\n  return Events;\n}();\n\n_XMLHttpRequest = window.XMLHttpRequest;\n_XDomainRequest = window.XDomainRequest;\n_WebSocket = window.WebSocket;\n\nextendNative = function (to, from) {\n  var e, key, _results;\n\n  _results = [];\n\n  for (key in from.prototype) {\n    try {\n      if (to[key] == null && typeof from[key] !== 'function') {\n        if (typeof Object.defineProperty === 'function') {\n          _results.push(Object.defineProperty(to, key, {\n            get: function () {\n              return from.prototype[key];\n            },\n            configurable: true,\n            enumerable: true\n          }));\n        } else {\n          _results.push(to[key] = from.prototype[key]);\n        }\n      } else {\n        _results.push(void 0);\n      }\n    } catch (_error) {\n      e = _error;\n    }\n  }\n\n  return _results;\n};\n\nignoreStack = [];\n\nPace.ignore = function () {\n  var args, fn, ret;\n  fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n  ignoreStack.unshift('ignore');\n  ret = fn.apply(null, args);\n  ignoreStack.shift();\n  return ret;\n};\n\nPace.track = function () {\n  var args, fn, ret;\n  fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n  ignoreStack.unshift('track');\n  ret = fn.apply(null, args);\n  ignoreStack.shift();\n  return ret;\n};\n\nshouldTrack = function (method) {\n  var _ref2;\n\n  if (method == null) {\n    method = 'GET';\n  }\n\n  if (ignoreStack[0] === 'track') {\n    return 'force';\n  }\n\n  if (!ignoreStack.length && options.ajax) {\n    if (method === 'socket' && options.ajax.trackWebSockets) {\n      return true;\n    } else if (_ref2 = method.toUpperCase(), __indexOf.call(options.ajax.trackMethods, _ref2) >= 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nRequestIntercept = function (_super) {\n  __extends(RequestIntercept, _super);\n\n  function RequestIntercept() {\n    var monitorXHR,\n        _this = this;\n\n    RequestIntercept.__super__.constructor.apply(this, arguments);\n\n    monitorXHR = function (req) {\n      var _open;\n\n      _open = req.open;\n      return req.open = function (type, url, async) {\n        if (shouldTrack(type)) {\n          _this.trigger('request', {\n            type: type,\n            url: url,\n            request: req\n          });\n        }\n\n        return _open.apply(req, arguments);\n      };\n    };\n\n    window.XMLHttpRequest = function (flags) {\n      var req;\n      req = new _XMLHttpRequest(flags);\n      monitorXHR(req);\n      return req;\n    };\n\n    try {\n      extendNative(window.XMLHttpRequest, _XMLHttpRequest);\n    } catch (_error) {}\n\n    if (_XDomainRequest != null) {\n      window.XDomainRequest = function () {\n        var req;\n        req = new _XDomainRequest();\n        monitorXHR(req);\n        return req;\n      };\n\n      try {\n        extendNative(window.XDomainRequest, _XDomainRequest);\n      } catch (_error) {}\n    }\n\n    if (_WebSocket != null && options.ajax.trackWebSockets) {\n      window.WebSocket = function (url, protocols) {\n        var req;\n\n        if (protocols != null) {\n          req = new _WebSocket(url, protocols);\n        } else {\n          req = new _WebSocket(url);\n        }\n\n        if (shouldTrack('socket')) {\n          _this.trigger('request', {\n            type: 'socket',\n            url: url,\n            protocols: protocols,\n            request: req\n          });\n        }\n\n        return req;\n      };\n\n      try {\n        extendNative(window.WebSocket, _WebSocket);\n      } catch (_error) {}\n    }\n  }\n\n  return RequestIntercept;\n}(Events);\n\n_intercept = null;\n\ngetIntercept = function () {\n  if (_intercept == null) {\n    _intercept = new RequestIntercept();\n  }\n\n  return _intercept;\n};\n\nshouldIgnoreURL = function (url) {\n  var pattern, _j, _len1, _ref2;\n\n  _ref2 = options.ajax.ignoreURLs;\n\n  for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n    pattern = _ref2[_j];\n\n    if (typeof pattern === 'string') {\n      if (url.indexOf(pattern) !== -1) {\n        return true;\n      }\n    } else {\n      if (pattern.test(url)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\ngetIntercept().on('request', function (_arg) {\n  var after, args, request, type, url;\n  type = _arg.type, request = _arg.request, url = _arg.url;\n\n  if (shouldIgnoreURL(url)) {\n    return;\n  }\n\n  if (!Pace.running && (options.restartOnRequestAfter !== false || shouldTrack(type) === 'force')) {\n    args = arguments;\n    after = options.restartOnRequestAfter || 0;\n\n    if (typeof after === 'boolean') {\n      after = 0;\n    }\n\n    return setTimeout(function () {\n      var stillActive, _j, _len1, _ref2, _ref3, _results;\n\n      if (type === 'socket') {\n        stillActive = request.readyState < 2;\n      } else {\n        stillActive = 0 < (_ref2 = request.readyState) && _ref2 < 4;\n      }\n\n      if (stillActive) {\n        Pace.restart();\n        _ref3 = Pace.sources;\n        _results = [];\n\n        for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n          source = _ref3[_j];\n\n          if (source instanceof AjaxMonitor) {\n            source.watch.apply(source, args);\n            break;\n          } else {\n            _results.push(void 0);\n          }\n        }\n\n        return _results;\n      }\n    }, after);\n  }\n});\n\nAjaxMonitor = function () {\n  function AjaxMonitor() {\n    var _this = this;\n\n    this.elements = [];\n    getIntercept().on('request', function () {\n      return _this.watch.apply(_this, arguments);\n    });\n  }\n\n  AjaxMonitor.prototype.watch = function (_arg) {\n    var request, tracker, type, url;\n    type = _arg.type, request = _arg.request, url = _arg.url;\n\n    if (shouldIgnoreURL(url)) {\n      return;\n    }\n\n    if (type === 'socket') {\n      tracker = new SocketRequestTracker(request);\n    } else {\n      tracker = new XHRRequestTracker(request);\n    }\n\n    return this.elements.push(tracker);\n  };\n\n  return AjaxMonitor;\n}();\n\nXHRRequestTracker = function () {\n  function XHRRequestTracker(request) {\n    var event,\n        size,\n        _j,\n        _len1,\n        _onreadystatechange,\n        _ref2,\n        _this = this;\n\n    this.progress = 0;\n\n    if (window.ProgressEvent != null) {\n      size = null;\n      request.addEventListener('progress', function (evt) {\n        if (evt.lengthComputable) {\n          return _this.progress = 100 * evt.loaded / evt.total;\n        } else {\n          return _this.progress = _this.progress + (100 - _this.progress) / 2;\n        }\n      }, false);\n      _ref2 = ['load', 'abort', 'timeout', 'error'];\n\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        event = _ref2[_j];\n        request.addEventListener(event, function () {\n          return _this.progress = 100;\n        }, false);\n      }\n    } else {\n      _onreadystatechange = request.onreadystatechange;\n\n      request.onreadystatechange = function () {\n        var _ref3;\n\n        if ((_ref3 = request.readyState) === 0 || _ref3 === 4) {\n          _this.progress = 100;\n        } else if (request.readyState === 3) {\n          _this.progress = 50;\n        }\n\n        return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n      };\n    }\n  }\n\n  return XHRRequestTracker;\n}();\n\nSocketRequestTracker = function () {\n  function SocketRequestTracker(request) {\n    var event,\n        _j,\n        _len1,\n        _ref2,\n        _this = this;\n\n    this.progress = 0;\n    _ref2 = ['error', 'open'];\n\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      event = _ref2[_j];\n      request.addEventListener(event, function () {\n        return _this.progress = 100;\n      }, false);\n    }\n  }\n\n  return SocketRequestTracker;\n}();\n\nElementMonitor = function () {\n  function ElementMonitor(options) {\n    var selector, _j, _len1, _ref2;\n\n    if (options == null) {\n      options = {};\n    }\n\n    this.elements = [];\n\n    if (options.selectors == null) {\n      options.selectors = [];\n    }\n\n    _ref2 = options.selectors;\n\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      selector = _ref2[_j];\n      this.elements.push(new ElementTracker(selector));\n    }\n  }\n\n  return ElementMonitor;\n}();\n\nElementTracker = function () {\n  function ElementTracker(selector) {\n    this.selector = selector;\n    this.progress = 0;\n    this.check();\n  }\n\n  ElementTracker.prototype.check = function () {\n    var _this = this;\n\n    if (document.querySelector(this.selector)) {\n      return this.done();\n    } else {\n      return setTimeout(function () {\n        return _this.check();\n      }, options.elements.checkInterval);\n    }\n  };\n\n  ElementTracker.prototype.done = function () {\n    return this.progress = 100;\n  };\n\n  return ElementTracker;\n}();\n\nDocumentMonitor = function () {\n  DocumentMonitor.prototype.states = {\n    loading: 0,\n    interactive: 50,\n    complete: 100\n  };\n\n  function DocumentMonitor() {\n    var _onreadystatechange,\n        _ref2,\n        _this = this;\n\n    this.progress = (_ref2 = this.states[document.readyState]) != null ? _ref2 : 100;\n    _onreadystatechange = document.onreadystatechange;\n\n    document.onreadystatechange = function () {\n      if (_this.states[document.readyState] != null) {\n        _this.progress = _this.states[document.readyState];\n      }\n\n      return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n    };\n  }\n\n  return DocumentMonitor;\n}();\n\nEventLagMonitor = function () {\n  function EventLagMonitor() {\n    var avg,\n        interval,\n        last,\n        points,\n        samples,\n        _this = this;\n\n    this.progress = 0;\n    avg = 0;\n    samples = [];\n    points = 0;\n    last = now();\n    interval = setInterval(function () {\n      var diff;\n      diff = now() - last - 50;\n      last = now();\n      samples.push(diff);\n\n      if (samples.length > options.eventLag.sampleCount) {\n        samples.shift();\n      }\n\n      avg = avgAmplitude(samples);\n\n      if (++points >= options.eventLag.minSamples && avg < options.eventLag.lagThreshold) {\n        _this.progress = 100;\n        return clearInterval(interval);\n      } else {\n        return _this.progress = 100 * (3 / (avg + 3));\n      }\n    }, 50);\n  }\n\n  return EventLagMonitor;\n}();\n\nScaler = function () {\n  function Scaler(source) {\n    this.source = source;\n    this.last = this.sinceLastUpdate = 0;\n    this.rate = options.initialRate;\n    this.catchup = 0;\n    this.progress = this.lastProgress = 0;\n\n    if (this.source != null) {\n      this.progress = result(this.source, 'progress');\n    }\n  }\n\n  Scaler.prototype.tick = function (frameTime, val) {\n    var scaling;\n\n    if (val == null) {\n      val = result(this.source, 'progress');\n    }\n\n    if (val >= 100) {\n      this.done = true;\n    }\n\n    if (val === this.last) {\n      this.sinceLastUpdate += frameTime;\n    } else {\n      if (this.sinceLastUpdate) {\n        this.rate = (val - this.last) / this.sinceLastUpdate;\n      }\n\n      this.catchup = (val - this.progress) / options.catchupTime;\n      this.sinceLastUpdate = 0;\n      this.last = val;\n    }\n\n    if (val > this.progress) {\n      this.progress += this.catchup * frameTime;\n    }\n\n    scaling = 1 - Math.pow(this.progress / 100, options.easeFactor);\n    this.progress += scaling * this.rate * frameTime;\n    this.progress = Math.min(this.lastProgress + options.maxProgressPerFrame, this.progress);\n    this.progress = Math.max(0, this.progress);\n    this.progress = Math.min(100, this.progress);\n    this.lastProgress = this.progress;\n    return this.progress;\n  };\n\n  return Scaler;\n}();\n\nsources = null;\nscalers = null;\nbar = null;\nuniScaler = null;\nanimation = null;\ncancelAnimation = null;\nPace.running = false;\n\nhandlePushState = function () {\n  if (options.restartOnPushState) {\n    return Pace.restart();\n  }\n};\n\nif (window.history.pushState != null) {\n  _pushState = window.history.pushState;\n\n  window.history.pushState = function () {\n    handlePushState();\n    return _pushState.apply(window.history, arguments);\n  };\n}\n\nif (window.history.replaceState != null) {\n  _replaceState = window.history.replaceState;\n\n  window.history.replaceState = function () {\n    handlePushState();\n    return _replaceState.apply(window.history, arguments);\n  };\n}\n\nSOURCE_KEYS = {\n  ajax: AjaxMonitor,\n  elements: ElementMonitor,\n  document: DocumentMonitor,\n  eventLag: EventLagMonitor\n};\n(init = function () {\n  var type, _j, _k, _len1, _len2, _ref2, _ref3, _ref4;\n\n  Pace.sources = sources = [];\n  _ref2 = ['ajax', 'elements', 'document', 'eventLag'];\n\n  for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n    type = _ref2[_j];\n\n    if (options[type] !== false) {\n      sources.push(new SOURCE_KEYS[type](options[type]));\n    }\n  }\n\n  _ref4 = (_ref3 = options.extraSources) != null ? _ref3 : [];\n\n  for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n    source = _ref4[_k];\n    sources.push(new source(options));\n  }\n\n  Pace.bar = bar = new Bar();\n  scalers = [];\n  return uniScaler = new Scaler();\n})();\n\nPace.stop = function () {\n  Pace.trigger('stop');\n  Pace.running = false;\n  bar.destroy();\n  cancelAnimation = true;\n\n  if (animation != null) {\n    if (typeof cancelAnimationFrame === \"function\") {\n      cancelAnimationFrame(animation);\n    }\n\n    animation = null;\n  }\n\n  return init();\n};\n\nPace.restart = function () {\n  Pace.trigger('restart');\n  Pace.stop();\n  return Pace.start();\n};\n\nPace.go = function () {\n  var start;\n  Pace.running = true;\n  bar.render();\n  start = now();\n  cancelAnimation = false;\n  return animation = runAnimation(function (frameTime, enqueueNextFrame) {\n    var avg, count, done, element, elements, i, j, remaining, scaler, scalerList, sum, _j, _k, _len1, _len2, _ref2;\n\n    remaining = 100 - bar.progress;\n    count = sum = 0;\n    done = true;\n\n    for (i = _j = 0, _len1 = sources.length; _j < _len1; i = ++_j) {\n      source = sources[i];\n      scalerList = scalers[i] != null ? scalers[i] : scalers[i] = [];\n      elements = (_ref2 = source.elements) != null ? _ref2 : [source];\n\n      for (j = _k = 0, _len2 = elements.length; _k < _len2; j = ++_k) {\n        element = elements[j];\n        scaler = scalerList[j] != null ? scalerList[j] : scalerList[j] = new Scaler(element);\n        done &= scaler.done;\n\n        if (scaler.done) {\n          continue;\n        }\n\n        count++;\n        sum += scaler.tick(frameTime);\n      }\n    }\n\n    avg = sum / count;\n    bar.update(uniScaler.tick(frameTime, avg));\n\n    if (bar.done() || done || cancelAnimation) {\n      bar.update(100);\n      Pace.trigger('done');\n      return setTimeout(function () {\n        bar.finish();\n        Pace.running = false;\n        return Pace.trigger('hide');\n      }, Math.max(options.ghostTime, Math.max(options.minTime - (now() - start), 0)));\n    } else {\n      return enqueueNextFrame();\n    }\n  });\n};\n\nPace.start = function (_options) {\n  extend(options, _options);\n  Pace.running = true;\n\n  try {\n    bar.render();\n  } catch (_error) {\n    NoTargetError = _error;\n  }\n\n  if (!document.querySelector('.pace')) {\n    return setTimeout(Pace.start, 50);\n  } else {\n    Pace.trigger('start');\n    return Pace.go();\n  }\n}; // if (typeof define === 'function' && define.amd) {\n//   define(['pace'], function() {\n//     return Pace;\n//   });\n// } else if (typeof exports === 'object') {\n//   module.exports = Pace;\n// } else {\n//   if (options.startOnPageLoad) {\n//     Pace.start();\n//   }\n// }\n\n\nmodule.exports = Pace;","map":{"version":3,"sources":["/Users/renard/education2020-react/public/vendor/pace/pace.js"],"names":["AjaxMonitor","Bar","DocumentMonitor","ElementMonitor","ElementTracker","EventLagMonitor","Evented","Events","NoTargetError","Pace","RequestIntercept","SOURCE_KEYS","Scaler","SocketRequestTracker","XHRRequestTracker","animation","avgAmplitude","bar","cancelAnimation","cancelAnimationFrame","defaultOptions","extend","extendNative","getFromDOM","getIntercept","handlePushState","ignoreStack","init","now","options","requestAnimationFrame","result","runAnimation","scalers","shouldIgnoreURL","shouldTrack","source","sources","uniScaler","_WebSocket","_XDomainRequest","_XMLHttpRequest","_i","_intercept","_len","_pushState","_ref","_ref1","_replaceState","__slice","slice","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","__indexOf","indexOf","item","i","l","length","catchupTime","initialRate","minTime","ghostTime","maxProgressPerFrame","easeFactor","startOnPageLoad","restartOnPushState","restartOnRequestAfter","target","elements","checkInterval","selectors","eventLag","minSamples","sampleCount","lagThreshold","ajax","trackMethods","trackWebSockets","ignoreURLs","performance","Date","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","mozCancelAnimationFrame","fn","setTimeout","id","clearTimeout","last","tick","diff","args","obj","arguments","apply","out","val","arr","count","sum","v","Math","abs","json","data","e","el","document","querySelector","getAttribute","JSON","parse","_error","console","error","on","event","handler","ctx","once","_base","bindings","push","off","_results","splice","trigger","paceOptions","_super","Error","progress","getElement","targetElement","createElement","className","body","replace","innerHTML","firstChild","insertBefore","appendChild","finish","update","prog","render","destroy","parentNode","removeChild","progressStr","transform","_j","_len1","_ref2","children","style","lastRenderedProgress","setAttribute","done","name","binding","XMLHttpRequest","XDomainRequest","WebSocket","to","from","Object","defineProperty","get","configurable","enumerable","ignore","ret","unshift","shift","track","method","toUpperCase","monitorXHR","_this","req","_open","open","type","url","async","request","flags","protocols","pattern","test","_arg","after","running","stillActive","_ref3","readyState","restart","watch","tracker","size","_onreadystatechange","ProgressEvent","addEventListener","evt","lengthComputable","loaded","total","onreadystatechange","selector","check","states","loading","interactive","complete","avg","interval","points","samples","setInterval","clearInterval","sinceLastUpdate","rate","catchup","lastProgress","frameTime","scaling","pow","min","max","history","pushState","replaceState","_k","_len2","_ref4","extraSources","stop","start","go","enqueueNextFrame","element","j","remaining","scaler","scalerList","_options","module","exports"],"mappings":"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","sourcesContent":["//\n// Modified by @casesandberg to work via Node exports\n//\n// Copyright (c) 2013 HubSpot, Inc.\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\n\nvar AjaxMonitor, Bar, DocumentMonitor, ElementMonitor, ElementTracker,\n    EventLagMonitor, Evented, Events, NoTargetError, Pace, RequestIntercept,\n    SOURCE_KEYS, Scaler, SocketRequestTracker, XHRRequestTracker, animation,\n    avgAmplitude, bar, cancelAnimation, cancelAnimationFrame, defaultOptions,\n    extend, extendNative, getFromDOM, getIntercept, handlePushState, ignoreStack,\n    init, now, options, requestAnimationFrame, result, runAnimation, scalers,\n    shouldIgnoreURL, shouldTrack, source, sources, uniScaler, _WebSocket,\n    _XDomainRequest, _XMLHttpRequest, _i, _intercept, _len, _pushState, _ref,\n    _ref1, _replaceState,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\ndefaultOptions = {\n    catchupTime: 100,\n    initialRate: .03,\n    minTime: 250,\n    ghostTime: 100,\n    maxProgressPerFrame: 20,\n    easeFactor: 1.25,\n    startOnPageLoad: true,\n    restartOnPushState: true,\n    restartOnRequestAfter: 500,\n    target: 'body',\n    elements: {\n        checkInterval: 100,\n        selectors: ['body']\n    },\n    eventLag: {\n        minSamples: 10,\n        sampleCount: 3,\n        lagThreshold: 3\n    },\n    ajax: {\n        trackMethods: ['GET'],\n        trackWebSockets: true,\n        ignoreURLs: []\n    }\n};\n\nnow = function() {\n    var _ref;\n    return (_ref = typeof performance !== \"undefined\" && performance !== null ? typeof performance.now === \"function\" ? performance.now() : void 0 : void 0) != null ? _ref : +(new Date);\n};\n\nrequestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\ncancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\nif (requestAnimationFrame == null) {\n    requestAnimationFrame = function(fn) {\n        return setTimeout(fn, 50);\n    };\n    cancelAnimationFrame = function(id) {\n        return clearTimeout(id);\n    };\n}\n\nrunAnimation = function(fn) {\n    var last, tick;\n    last = now();\n    tick = function() {\n        var diff;\n        diff = now() - last;\n        if (diff >= 33) {\n            last = now();\n            return fn(diff, function() {\n                return requestAnimationFrame(tick);\n            });\n        } else {\n            return setTimeout(tick, 33 - diff);\n        }\n    };\n    return tick();\n};\n\nresult = function() {\n    var args, key, obj;\n    obj = arguments[0], key = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n    if (typeof obj[key] === 'function') {\n        return obj[key].apply(obj, args);\n    } else {\n        return obj[key];\n    }\n};\n\nextend = function() {\n    var key, out, source, sources, val, _i, _len;\n    out = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    for (_i = 0, _len = sources.length; _i < _len; _i++) {\n        source = sources[_i];\n        if (source) {\n            for (key in source) {\n                if (!__hasProp.call(source, key)) continue;\n                val = source[key];\n                if ((out[key] != null) && typeof out[key] === 'object' && (val != null) && typeof val === 'object') {\n                    extend(out[key], val);\n                } else {\n                    out[key] = val;\n                }\n            }\n        }\n    }\n    return out;\n};\n\navgAmplitude = function(arr) {\n    var count, sum, v, _i, _len;\n    sum = count = 0;\n    for (_i = 0, _len = arr.length; _i < _len; _i++) {\n        v = arr[_i];\n        sum += Math.abs(v);\n        count++;\n    }\n    return sum / count;\n};\n\ngetFromDOM = function(key, json) {\n    var data, e, el;\n    if (key == null) {\n        key = 'options';\n    }\n    if (json == null) {\n        json = true;\n    }\n    el = document.querySelector(\"[data-pace-\" + key + \"]\");\n    if (!el) {\n        return;\n    }\n    data = el.getAttribute(\"data-pace-\" + key);\n    if (!json) {\n        return data;\n    }\n    try {\n        return JSON.parse(data);\n    } catch (_error) {\n        e = _error;\n        return typeof console !== \"undefined\" && console !== null ? console.error(\"Error parsing inline pace options\", e) : void 0;\n    }\n};\n\nEvented = (function() {\n    function Evented() {}\n\n    Evented.prototype.on = function(event, handler, ctx, once) {\n        var _base;\n        if (once == null) {\n            once = false;\n        }\n        if (this.bindings == null) {\n            this.bindings = {};\n        }\n        if ((_base = this.bindings)[event] == null) {\n            _base[event] = [];\n        }\n        return this.bindings[event].push({\n            handler: handler,\n            ctx: ctx,\n            once: once\n        });\n    };\n\n    Evented.prototype.once = function(event, handler, ctx) {\n        return this.on(event, handler, ctx, true);\n    };\n\n    Evented.prototype.off = function(event, handler) {\n        var i, _ref, _results;\n        if (((_ref = this.bindings) != null ? _ref[event] : void 0) == null) {\n            return;\n        }\n        if (handler == null) {\n            return delete this.bindings[event];\n        } else {\n            i = 0;\n            _results = [];\n            while (i < this.bindings[event].length) {\n                if (this.bindings[event][i].handler === handler) {\n                    _results.push(this.bindings[event].splice(i, 1));\n                } else {\n                    _results.push(i++);\n                }\n            }\n            return _results;\n        }\n    };\n\n    Evented.prototype.trigger = function() {\n        var args, ctx, event, handler, i, once, _ref, _ref1, _results;\n        event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        if ((_ref = this.bindings) != null ? _ref[event] : void 0) {\n            i = 0;\n            _results = [];\n            while (i < this.bindings[event].length) {\n                _ref1 = this.bindings[event][i], handler = _ref1.handler, ctx = _ref1.ctx, once = _ref1.once;\n                handler.apply(ctx != null ? ctx : this, args);\n                if (once) {\n                    _results.push(this.bindings[event].splice(i, 1));\n                } else {\n                    _results.push(i++);\n                }\n            }\n            return _results;\n        }\n    };\n\n    return Evented;\n\n})();\n\nPace = {}; // window.Pace || {};\n\n// window.Pace = Pace;\n\nextend(Pace, Evented.prototype);\n\noptions = Pace.options = extend({}, defaultOptions, window.paceOptions, getFromDOM());\n\n_ref = ['ajax', 'document', 'eventLag', 'elements'];\nfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n    source = _ref[_i];\n    if (options[source] === true) {\n        options[source] = defaultOptions[source];\n    }\n}\n\nNoTargetError = (function(_super) {\n    __extends(NoTargetError, _super);\n\n    function NoTargetError() {\n        _ref1 = NoTargetError.__super__.constructor.apply(this, arguments);\n        return _ref1;\n    }\n\n    return NoTargetError;\n\n})(Error);\n\nBar = (function() {\n    function Bar() {\n        this.progress = 0;\n    }\n\n    Bar.prototype.getElement = function() {\n        var targetElement;\n        if (this.el == null) {\n            targetElement = document.querySelector(options.target);\n            if (!targetElement) {\n                throw new NoTargetError;\n            }\n            this.el = document.createElement('div');\n            this.el.className = \"pace pace-active\";\n            document.body.className = document.body.className.replace(/pace-done/g, '');\n            document.body.className += ' pace-running';\n            this.el.innerHTML = '<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>';\n            if (targetElement.firstChild != null) {\n                targetElement.insertBefore(this.el, targetElement.firstChild);\n            } else {\n                targetElement.appendChild(this.el);\n            }\n        }\n        return this.el;\n    };\n\n    Bar.prototype.finish = function() {\n        var el;\n        el = this.getElement();\n        el.className = el.className.replace('pace-active', '');\n        el.className += ' pace-inactive';\n        document.body.className = document.body.className.replace('pace-running', '');\n        return document.body.className += ' pace-done';\n    };\n\n    Bar.prototype.update = function(prog) {\n        this.progress = prog;\n        return this.render();\n    };\n\n    Bar.prototype.destroy = function() {\n        try {\n            this.getElement().parentNode.removeChild(this.getElement());\n        } catch (_error) {\n            NoTargetError = _error;\n        }\n        return this.el = void 0;\n    };\n\n    Bar.prototype.render = function() {\n        var el, key, progressStr, transform, _j, _len1, _ref2;\n        if (document.querySelector(options.target) == null) {\n            return false;\n        }\n        el = this.getElement();\n        transform = \"translate3d(\" + this.progress + \"%, 0, 0)\";\n        _ref2 = ['webkitTransform', 'msTransform', 'transform'];\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n            key = _ref2[_j];\n            el.children[0].style[key] = transform;\n        }\n        if (!this.lastRenderedProgress || this.lastRenderedProgress | 0 !== this.progress | 0) {\n            el.children[0].setAttribute('data-progress-text', \"\" + (this.progress | 0) + \"%\");\n            if (this.progress >= 100) {\n                progressStr = '99';\n            } else {\n                progressStr = this.progress < 10 ? \"0\" : \"\";\n                progressStr += this.progress | 0;\n            }\n            el.children[0].setAttribute('data-progress', \"\" + progressStr);\n        }\n        return this.lastRenderedProgress = this.progress;\n    };\n\n    Bar.prototype.done = function() {\n        return this.progress >= 100;\n    };\n\n    return Bar;\n\n})();\n\nEvents = (function() {\n    function Events() {\n        this.bindings = {};\n    }\n\n    Events.prototype.trigger = function(name, val) {\n        var binding, _j, _len1, _ref2, _results;\n        if (this.bindings[name] != null) {\n            _ref2 = this.bindings[name];\n            _results = [];\n            for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n                binding = _ref2[_j];\n                _results.push(binding.call(this, val));\n            }\n            return _results;\n        }\n    };\n\n    Events.prototype.on = function(name, fn) {\n        var _base;\n        if ((_base = this.bindings)[name] == null) {\n            _base[name] = [];\n        }\n        return this.bindings[name].push(fn);\n    };\n\n    return Events;\n\n})();\n\n_XMLHttpRequest = window.XMLHttpRequest;\n\n_XDomainRequest = window.XDomainRequest;\n\n_WebSocket = window.WebSocket;\n\nextendNative = function(to, from) {\n    var e, key, _results;\n    _results = [];\n    for (key in from.prototype) {\n        try {\n            if ((to[key] == null) && typeof from[key] !== 'function') {\n                if (typeof Object.defineProperty === 'function') {\n                    _results.push(Object.defineProperty(to, key, {\n                        get: function() {\n                            return from.prototype[key];\n                        },\n                        configurable: true,\n                        enumerable: true\n                    }));\n                } else {\n                    _results.push(to[key] = from.prototype[key]);\n                }\n            } else {\n                _results.push(void 0);\n            }\n        } catch (_error) {\n            e = _error;\n        }\n    }\n    return _results;\n};\n\nignoreStack = [];\n\nPace.ignore = function() {\n    var args, fn, ret;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    ignoreStack.unshift('ignore');\n    ret = fn.apply(null, args);\n    ignoreStack.shift();\n    return ret;\n};\n\nPace.track = function() {\n    var args, fn, ret;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    ignoreStack.unshift('track');\n    ret = fn.apply(null, args);\n    ignoreStack.shift();\n    return ret;\n};\n\nshouldTrack = function(method) {\n    var _ref2;\n    if (method == null) {\n        method = 'GET';\n    }\n    if (ignoreStack[0] === 'track') {\n        return 'force';\n    }\n    if (!ignoreStack.length && options.ajax) {\n        if (method === 'socket' && options.ajax.trackWebSockets) {\n            return true;\n        } else if (_ref2 = method.toUpperCase(), __indexOf.call(options.ajax.trackMethods, _ref2) >= 0) {\n            return true;\n        }\n    }\n    return false;\n};\n\nRequestIntercept = (function(_super) {\n    __extends(RequestIntercept, _super);\n\n    function RequestIntercept() {\n        var monitorXHR,\n            _this = this;\n        RequestIntercept.__super__.constructor.apply(this, arguments);\n        monitorXHR = function(req) {\n            var _open;\n            _open = req.open;\n            return req.open = function(type, url, async) {\n                if (shouldTrack(type)) {\n                    _this.trigger('request', {\n                        type: type,\n                        url: url,\n                        request: req\n                    });\n                }\n                return _open.apply(req, arguments);\n            };\n        };\n        window.XMLHttpRequest = function(flags) {\n            var req;\n            req = new _XMLHttpRequest(flags);\n            monitorXHR(req);\n            return req;\n        };\n        try {\n            extendNative(window.XMLHttpRequest, _XMLHttpRequest);\n        } catch (_error) {}\n        if (_XDomainRequest != null) {\n            window.XDomainRequest = function() {\n                var req;\n                req = new _XDomainRequest;\n                monitorXHR(req);\n                return req;\n            };\n            try {\n                extendNative(window.XDomainRequest, _XDomainRequest);\n            } catch (_error) {}\n        }\n        if ((_WebSocket != null) && options.ajax.trackWebSockets) {\n            window.WebSocket = function(url, protocols) {\n                var req;\n                if (protocols != null) {\n                    req = new _WebSocket(url, protocols);\n                } else {\n                    req = new _WebSocket(url);\n                }\n                if (shouldTrack('socket')) {\n                    _this.trigger('request', {\n                        type: 'socket',\n                        url: url,\n                        protocols: protocols,\n                        request: req\n                    });\n                }\n                return req;\n            };\n            try {\n                extendNative(window.WebSocket, _WebSocket);\n            } catch (_error) {}\n        }\n    }\n\n    return RequestIntercept;\n\n})(Events);\n\n_intercept = null;\n\ngetIntercept = function() {\n    if (_intercept == null) {\n        _intercept = new RequestIntercept;\n    }\n    return _intercept;\n};\n\nshouldIgnoreURL = function(url) {\n    var pattern, _j, _len1, _ref2;\n    _ref2 = options.ajax.ignoreURLs;\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        pattern = _ref2[_j];\n        if (typeof pattern === 'string') {\n            if (url.indexOf(pattern) !== -1) {\n                return true;\n            }\n        } else {\n            if (pattern.test(url)) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n\ngetIntercept().on('request', function(_arg) {\n    var after, args, request, type, url;\n    type = _arg.type, request = _arg.request, url = _arg.url;\n    if (shouldIgnoreURL(url)) {\n        return;\n    }\n    if (!Pace.running && (options.restartOnRequestAfter !== false || shouldTrack(type) === 'force')) {\n        args = arguments;\n        after = options.restartOnRequestAfter || 0;\n        if (typeof after === 'boolean') {\n            after = 0;\n        }\n        return setTimeout(function() {\n            var stillActive, _j, _len1, _ref2, _ref3, _results;\n            if (type === 'socket') {\n                stillActive = request.readyState < 2;\n            } else {\n                stillActive = (0 < (_ref2 = request.readyState) && _ref2 < 4);\n            }\n            if (stillActive) {\n                Pace.restart();\n                _ref3 = Pace.sources;\n                _results = [];\n                for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n                    source = _ref3[_j];\n                    if (source instanceof AjaxMonitor) {\n                        source.watch.apply(source, args);\n                        break;\n                    } else {\n                        _results.push(void 0);\n                    }\n                }\n                return _results;\n            }\n        }, after);\n    }\n});\n\nAjaxMonitor = (function() {\n    function AjaxMonitor() {\n        var _this = this;\n        this.elements = [];\n        getIntercept().on('request', function() {\n            return _this.watch.apply(_this, arguments);\n        });\n    }\n\n    AjaxMonitor.prototype.watch = function(_arg) {\n        var request, tracker, type, url;\n        type = _arg.type, request = _arg.request, url = _arg.url;\n        if (shouldIgnoreURL(url)) {\n            return;\n        }\n        if (type === 'socket') {\n            tracker = new SocketRequestTracker(request);\n        } else {\n            tracker = new XHRRequestTracker(request);\n        }\n        return this.elements.push(tracker);\n    };\n\n    return AjaxMonitor;\n\n})();\n\nXHRRequestTracker = (function() {\n    function XHRRequestTracker(request) {\n        var event, size, _j, _len1, _onreadystatechange, _ref2,\n            _this = this;\n        this.progress = 0;\n        if (window.ProgressEvent != null) {\n            size = null;\n            request.addEventListener('progress', function(evt) {\n                if (evt.lengthComputable) {\n                    return _this.progress = 100 * evt.loaded / evt.total;\n                } else {\n                    return _this.progress = _this.progress + (100 - _this.progress) / 2;\n                }\n            }, false);\n            _ref2 = ['load', 'abort', 'timeout', 'error'];\n            for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n                event = _ref2[_j];\n                request.addEventListener(event, function() {\n                    return _this.progress = 100;\n                }, false);\n            }\n        } else {\n            _onreadystatechange = request.onreadystatechange;\n            request.onreadystatechange = function() {\n                var _ref3;\n                if ((_ref3 = request.readyState) === 0 || _ref3 === 4) {\n                    _this.progress = 100;\n                } else if (request.readyState === 3) {\n                    _this.progress = 50;\n                }\n                return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n            };\n        }\n    }\n\n    return XHRRequestTracker;\n\n})();\n\nSocketRequestTracker = (function() {\n    function SocketRequestTracker(request) {\n        var event, _j, _len1, _ref2,\n            _this = this;\n        this.progress = 0;\n        _ref2 = ['error', 'open'];\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n            event = _ref2[_j];\n            request.addEventListener(event, function() {\n                return _this.progress = 100;\n            }, false);\n        }\n    }\n\n    return SocketRequestTracker;\n\n})();\n\nElementMonitor = (function() {\n    function ElementMonitor(options) {\n        var selector, _j, _len1, _ref2;\n        if (options == null) {\n            options = {};\n        }\n        this.elements = [];\n        if (options.selectors == null) {\n            options.selectors = [];\n        }\n        _ref2 = options.selectors;\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n            selector = _ref2[_j];\n            this.elements.push(new ElementTracker(selector));\n        }\n    }\n\n    return ElementMonitor;\n\n})();\n\nElementTracker = (function() {\n    function ElementTracker(selector) {\n        this.selector = selector;\n        this.progress = 0;\n        this.check();\n    }\n\n    ElementTracker.prototype.check = function() {\n        var _this = this;\n        if (document.querySelector(this.selector)) {\n            return this.done();\n        } else {\n            return setTimeout((function() {\n                return _this.check();\n            }), options.elements.checkInterval);\n        }\n    };\n\n    ElementTracker.prototype.done = function() {\n        return this.progress = 100;\n    };\n\n    return ElementTracker;\n\n})();\n\nDocumentMonitor = (function() {\n    DocumentMonitor.prototype.states = {\n        loading: 0,\n        interactive: 50,\n        complete: 100\n    };\n\n    function DocumentMonitor() {\n        var _onreadystatechange, _ref2,\n            _this = this;\n        this.progress = (_ref2 = this.states[document.readyState]) != null ? _ref2 : 100;\n        _onreadystatechange = document.onreadystatechange;\n        document.onreadystatechange = function() {\n            if (_this.states[document.readyState] != null) {\n                _this.progress = _this.states[document.readyState];\n            }\n            return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n        };\n    }\n\n    return DocumentMonitor;\n\n})();\n\nEventLagMonitor = (function() {\n    function EventLagMonitor() {\n        var avg, interval, last, points, samples,\n            _this = this;\n        this.progress = 0;\n        avg = 0;\n        samples = [];\n        points = 0;\n        last = now();\n        interval = setInterval(function() {\n            var diff;\n            diff = now() - last - 50;\n            last = now();\n            samples.push(diff);\n            if (samples.length > options.eventLag.sampleCount) {\n                samples.shift();\n            }\n            avg = avgAmplitude(samples);\n            if (++points >= options.eventLag.minSamples && avg < options.eventLag.lagThreshold) {\n                _this.progress = 100;\n                return clearInterval(interval);\n            } else {\n                return _this.progress = 100 * (3 / (avg + 3));\n            }\n        }, 50);\n    }\n\n    return EventLagMonitor;\n\n})();\n\nScaler = (function() {\n    function Scaler(source) {\n        this.source = source;\n        this.last = this.sinceLastUpdate = 0;\n        this.rate = options.initialRate;\n        this.catchup = 0;\n        this.progress = this.lastProgress = 0;\n        if (this.source != null) {\n            this.progress = result(this.source, 'progress');\n        }\n    }\n\n    Scaler.prototype.tick = function(frameTime, val) {\n        var scaling;\n        if (val == null) {\n            val = result(this.source, 'progress');\n        }\n        if (val >= 100) {\n            this.done = true;\n        }\n        if (val === this.last) {\n            this.sinceLastUpdate += frameTime;\n        } else {\n            if (this.sinceLastUpdate) {\n                this.rate = (val - this.last) / this.sinceLastUpdate;\n            }\n            this.catchup = (val - this.progress) / options.catchupTime;\n            this.sinceLastUpdate = 0;\n            this.last = val;\n        }\n        if (val > this.progress) {\n            this.progress += this.catchup * frameTime;\n        }\n        scaling = 1 - Math.pow(this.progress / 100, options.easeFactor);\n        this.progress += scaling * this.rate * frameTime;\n        this.progress = Math.min(this.lastProgress + options.maxProgressPerFrame, this.progress);\n        this.progress = Math.max(0, this.progress);\n        this.progress = Math.min(100, this.progress);\n        this.lastProgress = this.progress;\n        return this.progress;\n    };\n\n    return Scaler;\n\n})();\n\nsources = null;\n\nscalers = null;\n\nbar = null;\n\nuniScaler = null;\n\nanimation = null;\n\ncancelAnimation = null;\n\nPace.running = false;\n\nhandlePushState = function() {\n    if (options.restartOnPushState) {\n        return Pace.restart();\n    }\n};\n\nif (window.history.pushState != null) {\n    _pushState = window.history.pushState;\n    window.history.pushState = function() {\n        handlePushState();\n        return _pushState.apply(window.history, arguments);\n    };\n}\n\nif (window.history.replaceState != null) {\n    _replaceState = window.history.replaceState;\n    window.history.replaceState = function() {\n        handlePushState();\n        return _replaceState.apply(window.history, arguments);\n    };\n}\n\nSOURCE_KEYS = {\n    ajax: AjaxMonitor,\n    elements: ElementMonitor,\n    document: DocumentMonitor,\n    eventLag: EventLagMonitor\n};\n\n(init = function() {\n    var type, _j, _k, _len1, _len2, _ref2, _ref3, _ref4;\n    Pace.sources = sources = [];\n    _ref2 = ['ajax', 'elements', 'document', 'eventLag'];\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        type = _ref2[_j];\n        if (options[type] !== false) {\n            sources.push(new SOURCE_KEYS[type](options[type]));\n        }\n    }\n    _ref4 = (_ref3 = options.extraSources) != null ? _ref3 : [];\n    for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n        source = _ref4[_k];\n        sources.push(new source(options));\n    }\n    Pace.bar = bar = new Bar;\n    scalers = [];\n    return uniScaler = new Scaler;\n})();\n\nPace.stop = function() {\n    Pace.trigger('stop');\n    Pace.running = false;\n    bar.destroy();\n    cancelAnimation = true;\n    if (animation != null) {\n        if (typeof cancelAnimationFrame === \"function\") {\n            cancelAnimationFrame(animation);\n        }\n        animation = null;\n    }\n    return init();\n};\n\nPace.restart = function() {\n    Pace.trigger('restart');\n    Pace.stop();\n    return Pace.start();\n};\n\nPace.go = function() {\n    var start;\n    Pace.running = true;\n    bar.render();\n    start = now();\n    cancelAnimation = false;\n    return animation = runAnimation(function(frameTime, enqueueNextFrame) {\n        var avg, count, done, element, elements, i, j, remaining, scaler, scalerList, sum, _j, _k, _len1, _len2, _ref2;\n        remaining = 100 - bar.progress;\n        count = sum = 0;\n        done = true;\n        for (i = _j = 0, _len1 = sources.length; _j < _len1; i = ++_j) {\n            source = sources[i];\n            scalerList = scalers[i] != null ? scalers[i] : scalers[i] = [];\n            elements = (_ref2 = source.elements) != null ? _ref2 : [source];\n            for (j = _k = 0, _len2 = elements.length; _k < _len2; j = ++_k) {\n                element = elements[j];\n                scaler = scalerList[j] != null ? scalerList[j] : scalerList[j] = new Scaler(element);\n                done &= scaler.done;\n                if (scaler.done) {\n                    continue;\n                }\n                count++;\n                sum += scaler.tick(frameTime);\n            }\n        }\n        avg = sum / count;\n        bar.update(uniScaler.tick(frameTime, avg));\n        if (bar.done() || done || cancelAnimation) {\n            bar.update(100);\n            Pace.trigger('done');\n            return setTimeout(function() {\n                bar.finish();\n                Pace.running = false;\n                return Pace.trigger('hide');\n            }, Math.max(options.ghostTime, Math.max(options.minTime - (now() - start), 0)));\n        } else {\n            return enqueueNextFrame();\n        }\n    });\n};\n\nPace.start = function(_options) {\n    extend(options, _options);\n    Pace.running = true;\n    try {\n        bar.render();\n    } catch (_error) {\n        NoTargetError = _error;\n    }\n    if (!document.querySelector('.pace')) {\n        return setTimeout(Pace.start, 50);\n    } else {\n        Pace.trigger('start');\n        return Pace.go();\n    }\n};\n\n// if (typeof define === 'function' && define.amd) {\n//   define(['pace'], function() {\n//     return Pace;\n//   });\n// } else if (typeof exports === 'object') {\n//   module.exports = Pace;\n// } else {\n//   if (options.startOnPageLoad) {\n//     Pace.start();\n//   }\n// }\n\nmodule.exports = Pace;"]},"metadata":{},"sourceType":"script"}