{"ast":null,"code":"var _jsxFileName = \"/Users/renard/education2020-react/src/views/bo/school/SchoolForm.jsx\";\nimport React from 'react';\nimport validate from '../../common/validation/validate';\n\nclass SchoolForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.formSubmitHandler = () => {\n      const formData = {};\n\n      for (let formElementId in this.state.formControls) {\n        formData[formElementId] = this.state.formControls[formElementId].value;\n      }\n\n      console.dir(formData);\n    };\n\n    this.state = {\n      formIsValid: false,\n      formControls: {\n        schoolName: {\n          value: '',\n          valid: false,\n          touched: false,\n          validationRules: {\n            minLength: 3\n          }\n        },\n        address: {\n          value: '',\n          validationRules: {\n            minLength: 3\n          }\n        },\n        zipCode: {\n          value: ''\n        },\n        description: {\n          value: ''\n        },\n        selectedRegion: {\n          value: '',\n          validationRules: {\n            minLength: 1\n          },\n          options: []\n        }\n      }\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.saveSchoolForm = this.saveSchoolForm.bind(this);\n  }\n\n  async componentDidMount() {\n    //Have a try and catch block for catching errors.\n    try {\n      //Assign the promise unresolved first then get the data using the json method.\n      const regionApiCall = await fetch('http://localhost:7777/api/v1/region/list');\n      const regions = await regionApiCall.json();\n      this.setState(...this.state, {\n        formIsValid: this.state.formIsValid,\n        formControls: {\n          schoolName: this.state.formControls.schoolName,\n          address: this.state.formControls.address,\n          zipCode: this.state.formControls.zipCode,\n          description: this.state.formControls.description,\n          selectedRegion: {\n            validationRules: this.state.formControls.selectedRegion.validationRules,\n            options: regions\n          }\n        }\n      });\n      console.log(regions);\n    } catch (err) {\n      console.log(\"Error fetching data-----------\", err);\n    }\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    console.log(target.value);\n    const name = target.name;\n    const updatedControls = { ...this.state.formControls\n    };\n    const updatedFormElement = { ...updatedControls[name]\n    };\n    updatedFormElement.value = value;\n    updatedFormElement.touched = true;\n    updatedFormElement.valid = validate(value, updatedFormElement.validationRules);\n    updatedControls[name] = updatedFormElement;\n    let formIsValid = true;\n\n    for (let inputIdentifier in updatedControls) {\n      if (typeof updatedControls[inputIdentifier] != 'undefined') {\n        formIsValid = updatedControls[inputIdentifier].valid && formIsValid;\n      }\n    }\n\n    console.log(updatedControls);\n    this.setState({\n      formControls: updatedControls,\n      formIsValid: formIsValid\n    });\n  }\n\n  saveSchoolForm(e) {\n    e.preventDefault();\n    console.log(this.state.formControls.schoolName.value);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"wrapper wrapper-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ibox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ibox-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"School form\"))), React.createElement(\"div\", {\n      className: \"ibox-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Region\"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"form-control m-b\",\n      name: \"regionList\",\n      value: this.state.formControls.selectedRegion.value,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, this.state.regionOptions.map(option => React.createElement(\"option\", {\n      value: option.code,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, option.name))))), React.createElement(\"div\", {\n      className: \"hr-line-dashed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: this.state.formControls.schoolName.touched && !this.state.formControls.schoolName.valid ? \"form-group row has-error\" : \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Nom \\xE9cole\"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"schoolName\",\n      value: this.state.formControls.schoolName.value,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"hr-line-dashed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group  row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Adresse\"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"address\",\n      value: this.state.formControls.address.value,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"hr-line-dashed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group  row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Code postale\"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"zipCode\",\n      value: this.state.formControls.zipCode.value,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"hr-line-dashed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group  row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      className: \"form-control\",\n      id: \"description\",\n      rows: \"3\",\n      placeholder: \"Enter a description ...\",\n      name: \"description\",\n      onChange: this.handleInputChange,\n      value: this.state.formControls.description.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"hr-line-dashed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12 col-sm-offset-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"float-e-margins\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-lg btn-white\",\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(\"button\", {\n      className: \"btn btn-lg btn-primary\",\n      type: \"button\",\n      disabled: !this.state.formIsValid,\n      onClick: this.saveSchoolForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Save\"))))))))));\n  }\n\n}\n\nexport default SchoolForm;","map":{"version":3,"sources":["/Users/renard/education2020-react/src/views/bo/school/SchoolForm.jsx"],"names":["React","validate","SchoolForm","Component","constructor","props","formSubmitHandler","formData","formElementId","state","formControls","value","console","dir","formIsValid","schoolName","valid","touched","validationRules","minLength","address","zipCode","description","selectedRegion","options","handleInputChange","bind","saveSchoolForm","componentDidMount","regionApiCall","fetch","regions","json","setState","log","err","event","target","type","checked","name","updatedControls","updatedFormElement","inputIdentifier","e","preventDefault","render","regionOptions","map","option","code"],"mappings":"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","sourcesContent":["import React from 'react';\nimport validate from '../../common/validation/validate';\n\nclass SchoolForm extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            formIsValid: false,\n            formControls: {\n                schoolName:  {\n                    value: '',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                       minLength: 3\n                    }\n                },\n                address: {\n                     value: '',\n                     validationRules: {\n                        minLength: 3\n                     }\n                 },\n                zipCode: {\n                     value: ''\n                 },\n                description: {\n                     value: ''\n                },\n                selectedRegion: {\n                     value: '',\n                     validationRules: {\n                        minLength: 1\n                     },\n                     options: []\n                }\n            }\n        };\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.saveSchoolForm = this.saveSchoolForm.bind(this);\n      }\n\n      async componentDidMount() {\n          //Have a try and catch block for catching errors.\n          try {\n              //Assign the promise unresolved first then get the data using the json method.\n              const regionApiCall = await fetch('http://localhost:7777/api/v1/region/list');\n              const regions = await regionApiCall.json();\n\n              this.setState(\n                ...this.state,\n                {\n                    formIsValid: this.state.formIsValid,\n                    formControls: {\n                        schoolName: this.state.formControls.schoolName,\n                        address: this.state.formControls.address,\n                        zipCode: this.state.formControls.zipCode,\n                        description: this.state.formControls.description,\n                        selectedRegion: {\n                            validationRules:  this.state.formControls.selectedRegion.validationRules,\n                            options: regions\n                        }\n                    }\n                }\n\n              );\n\n              console.log(regions);\n          } catch(err) {\n              console.log(\"Error fetching data-----------\", err);\n          }\n      }\n\n      handleInputChange(event) {\n          const target = event.target;\n          const value = target.type === 'checkbox' ? target.checked : target.value;\n          console.log(target.value);\n          const name = target.name;\n\n            const updatedControls = {\n            \t...this.state.formControls\n            };\n            const updatedFormElement = {\n                ...updatedControls[name]\n            };\n            updatedFormElement.value = value;\n            updatedFormElement.touched = true;\n            updatedFormElement.valid = validate(value, updatedFormElement.validationRules);\n\n            updatedControls[name] = updatedFormElement;\n\n            let formIsValid = true;\n            for (let inputIdentifier in updatedControls) {\n                if(typeof updatedControls[inputIdentifier] != 'undefined') {\n                    formIsValid = updatedControls[inputIdentifier].valid && formIsValid;\n                }\n            }\n\n            console.log(updatedControls);\n\n            this.setState({\n                formControls: updatedControls,\n                formIsValid: formIsValid\n            });\n        }\n\n    formSubmitHandler = () => {\n    \tconst formData = {};\n    \tfor (let formElementId in this.state.formControls) {\n    \t    formData[formElementId] = this.state.formControls[formElementId].value;\n    \t}\n\n        console.dir(formData);\n    }\n\n\n    saveSchoolForm(e) {\n        e.preventDefault();\n        console.log(this.state.formControls.schoolName.value);\n    }\n\n\n    render() {\n            return (\n                <div className=\"wrapper wrapper-content\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-12\">\n                            <div className=\"ibox\">\n                                <div className=\"ibox-title\">\n                                    <h5>School form</h5>\n                                </div>\n                            </div>\n                            <div className=\"ibox-content\">\n                                <form>\n\n                                    <div className=\"form-group row\"><label className=\"col-sm-2 col-form-label\">Region</label>\n\n                                        <div className=\"col-sm-10\">\n                                        <select className=\"form-control m-b\"\n                                        name=\"regionList\"\n                                        value={this.state.formControls.selectedRegion.value}\n                                        onChange={this.handleInputChange}\n                                        >\n                                            {this.state.regionOptions.map(option => (\n                                                <option value={option.code}>\n                                                  {option.name}\n                                                </option>\n                                              ))}\n                                        </select>\n                                        </div>\n                                    </div>\n                                    <div className=\"hr-line-dashed\"></div>\n\n                                    <div className={this.state.formControls.schoolName.touched && !this.state.formControls.schoolName.valid ?  \"form-group row has-error\" : \"form-group row\" }>\n                                        <label className=\"col-sm-2 col-form-label\">Nom école</label>\n                                        <div className=\"col-sm-10\">\n                                        <input type=\"text\" className= 'form-control' name=\"schoolName\"\n                                        value={this.state.formControls.schoolName.value}\n                                         onChange={this.handleInputChange}\n                                         />\n                                        </div>\n                                    </div>\n                                    <div className=\"hr-line-dashed\"></div>\n\n                                    <div className=\"form-group  row\"><label className=\"col-sm-2 col-form-label\">Adresse</label>\n                                        <div className=\"col-sm-10\"><input type=\"text\" className=\"form-control\" name=\"address\"\n                                        value={this.state.formControls.address.value}\n                                         onChange={this.handleInputChange} /></div>\n                                    </div>\n                                    <div className=\"hr-line-dashed\"></div>\n\n                                    <div className=\"form-group  row\"><label className=\"col-sm-2 col-form-label\">Code postale</label>\n                                        <div className=\"col-sm-10\"><input type=\"text\" className=\"form-control\" name=\"zipCode\"\n                                         value={this.state.formControls.zipCode.value}\n                                         onChange={this.handleInputChange} /></div>\n                                    </div>\n                                    <div className=\"hr-line-dashed\"></div>\n\n                                    <div className=\"form-group  row\"><label className=\"col-sm-2 col-form-label\">Description</label>\n                                        <div className=\"col-sm-10\">\n                                            <textarea className=\"form-control\" id=\"description\" rows=\"3\" placeholder=\"Enter a description ...\"\n                                            name=\"description\" onChange={this.handleInputChange}\n                                            value={this.state.formControls.description.value}\n                                            >\n\n                                            </textarea>\n                                        </div>\n                                    </div>\n                                    <div className=\"hr-line-dashed\"></div>\n\n                                    <div className=\"form-group row\">\n                                        <div className=\"col-sm-12 col-sm-offset-2\">\n                                            <div className=\"float-right\">\n                                                <div className=\"float-e-margins\">\n                                                    <button  className=\"btn btn-lg btn-white\" type=\"button\">Cancel</button>\n                                                    <button className=\"btn btn-lg btn-primary\" type=\"button\" disabled={!this.state.formIsValid} onClick={this.saveSchoolForm}>Save</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                         </div>\n                    </div>\n                </div>\n            )\n    }\n\n}\n\nexport default SchoolForm"]},"metadata":{},"sourceType":"module"}